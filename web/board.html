<!DOCTYPE html>
<html>
    <head>
        <!-- board name in the title -->
        <title></title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="webstyle.css">
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
        <script src="js/json2xml.js"></script>
        <script src="js/xmlToJSON.js"></script>
        <script src="//code.jquery.com/jquery-1.12.0.js"></script>
    </head>
    <body>
        <div id="users">
            <form>
                <input id="listUsers" type="button" value="Users">
            </form>
            <!-- The output goes here through the innerHTML function.-->
            <div id="userList"></div>
        </div>
        <div id="posts">
            <!-- The output goes here through the innerHTML function.-->
            <div id="postList"></div>
        </div>
        <div id="msg">
            <form>
                <input id="message" type="text" value="New entry">
                <input id="post2board" type="submit" value="Send">
            </form>
        </div>
        <script>
            var boardID;
            var names;
            var name;
            var i;
            var posts;
            var post;
            var j;
            $(document).ready(function () {
                //get the board's ID;
                $.get('api/boards', function (xml) {
                    var $xml = $(xml);
                    boardID = $xml.find("id");
                });
                
                //list all the board's users (get)
                $('#listUsers').click(function () {
                    $.get('api/users', function (xml) {
                        console.log(xml);
                        var $xml = $(xml);
                        names = $xml.find("name");
                        for (i = 0; i < names.length; i++) {
                            name += names[i].textContent + "<br>";
                        }
                        document.getElementById("userList").innerHTML = name;
                    });
                    name = "";
                });
                
                //display all the posts in the board (get)
                $.get('api/boards/{boardID}/posts', function (xml) {
                    console.log(xml);
                    var $xml = $(xml);
                    posts = $xml.find("name");//to be changed: id instead of name?
                    for (j = 0; j < names.length; j++) {
                        post += posts[i].textContent + "<br>";
                    }
                    document.getElementById("postList").innerHTML = post;
                });
                post = "";

                //add a new post to the board (post)
                $('post2board').click(function () {
                    console.log("inside post2board function");
                    var msg = $('#message').val();
                    $.post('api/boards/{boardID}/posts', msg,
                    function() {
                        console.log("post upload ok");
                    });
                });
            });
        </script>

    </body>
</html>