<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Boards</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="webstyle.css">
        <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
        <script src="js/json2xml.js"></script>
        <script src="js/xmlToJSON.js"></script>
        <script src="//code.jquery.com/jquery-1.12.0.js"></script>
    </head>
    <body>
        <div>
            <form>
                <input id="listBoards" type="button" value="Boards">
            </form>
            <!-- The output goes here through the innerHTML function.-->
            <div id="boardList"></div>
        </div>

        <script>
            var boardID;
            var boards;
            var board;
            var i;
            var link;
            var links;
            $(document).ready(function () {
                //list all the boards (get)
                $('#listBoards').click(function () {
                    $.get('api/boards', function (xml) {
                        console.log(xml);
                        var $xml = $(xml);
                        boards = $xml.find("name");
                        links = $xml.find("link");
                        for (i = 0; i < boards.length; i++) {
                            board +=
                                    "<a href=\"" + links[i].textContent + "\" onclick=\"getID(); return true;\">"
                                    + boards[i].textContent + "</a><br>";
                        }
                        document.getElementById("boardList").innerHTML = board;
                    });
                    board = "";
                    link = "";
                });
            });

            function getID() {
                $(document).ready(function () {
                    $.get('api/boards', function (xml) {
                        console.log(xml);
                        var $xml = $(xml);
                        boardID = $xml.find("id");// !!!TO DO: return only 1 id!!!
                        console.log(boardID);
                        //return boardID;
                    });
                });
            }
        </script>
    </body>
</html>
